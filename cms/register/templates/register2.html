<html>
    <head>
        <meta charset="utf-8">

        <title>Habbo: Wähle dein Geschlecht und dein Geburtsdatum!</title>

        <link type="text/css" href="{{ url_for('static', filename='css/registration.css') }}" rel="stylesheet">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    </head>

    <body>
        <div class="main">
            <div class="logo"></div>
            <div class="content-box" id="step-2">
                <div class="title-box">
                    <div class="title">Informações Pessoais</div>
                    <div class="steps">2 / 3</div>
                </div>

                <div class="png20">
                    <form action="/register/step2/" method="POST">
                        <input type="hidden" id="gender" name="gender" value="">

                        <div class="alert">Escolha seu gênero</div>

                        <div class="genders">
                            <label for="male" onclick="$('#gender').val('M')"><div class="male" style="background-image:url(https://www.habbo.de/habbo-imaging/avatarimage?figure=hd-180-1.hr-893-45.lg-280-64.sh-300-64.fa-1201-0.ch-255-62&size=l&headonly=1)"></div></label>

                            <label for="female" onclick="$('#gender').val('F')"><div class="female" style="background-image:url(https://www.habbo.de/habbo-imaging/avatarimage?figure=hd-600-1.hr-540-45.lg-695-62.sh-905-62.ch-660-62&size=l&head_direction=4&headonly=1)"></div></label>
                        </div>
                        <p class="desc">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>

                        <div style="clear:both"></div>

                        <a href="/register/" class="btn red back-register">Voltar</a>
                        <button class="btn green next-register">Avançar</button>

                        <div style="clear:both"></div>
                    </form>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript" src="{{ url_for('static', filename='js/vendor.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script type="text/javascript">
        function searchEmail() {
            console.log('TO DO / CONSULTAR SE O E-MAIL JÁ EXISTE CADASTRADO NO BANCO')
        }

        function confirmPassword() {
            var password = $('#register-password').val()
            var confirm_password = $('#register-password-confirm').val()
            if (confirm_password != password) {
                document.getElementById('message').style.color = 'red';
                document.getElementById('message').innerHTML = 'As senhas não combinam, tente novamente';
            } else {
                document.getElementById('message').style.display = 'none';
            }
        }

        $(document).ready(function() {
            $('form').on('submit', function(event) {
            event.preventDefault();
            $.ajax({
                url: 'step2',
                method: "POST",
                data: $(this).serialize(),
                dataType: 'json',
                async: false,
                success: function(result) {
                    localStorage.setItem('gender', result['gender']);
                    localStorage.setItem('birthday', result['birthday']);
                    window.location.href = '?step=3'
                    console.log(result)
                },
                error: function() {
                    alert("Ocorreu um erro ao carregar os dados.");
                }
            });
        })
    })
    </script>

</html>